(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const I=4,p=20;let r,c=null,g,l,L,b,w,a;document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("equation-text"),e=document.getElementById("feedback"),n=document.getElementById("score-value"),i=document.getElementById("task-count"),o=document.getElementById("timer-value"),s=document.getElementById("jellyfish-container");if(!t||!e||!n||!i||!o||!s)throw new Error("–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—Ç–∫–∏.");g=t,l=e,L=n,b=i,w=o,a=s,r={score:0,round:0,timeLeft:p,timerId:null,isLocked:!1},y()});function u(t,e){const n=Math.ceil(t),i=Math.floor(e);return Math.floor(Math.random()*(i-n+1))+n}function C(){const t=u(1,10),e=Math.min(10,20-t),n=u(1,e),i=t+n;return{a:t,b:n,operator:"+",answer:i}}function O(t,e){const n=new Set;for(n.add(t.answer);n.size<e;){const o=u(-10,10);if(o===0)continue;const s=t.answer+o;s<=0||n.add(s)}const i=Array.from(n);return k(i),i}function k(t){for(let e=t.length-1;e>0;e-=1){const n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}}function y(){E(),r.round+=1,r.timeLeft=p,r.isLocked=!1,c=C(),S(),f(),m(),v(),j(),M()}function v(){if(!c)return;const t=c;g.textContent=`${t.a} + ${t.b} = ?`}function j(){if(!c)return;const t=O(c,I);a.innerHTML="",t.forEach(e=>{const n=document.createElement("button");n.className="jellyfish",n.type="button";const i=document.createElement("span");i.className="jellyfish-label",i.textContent=e.toString(),n.appendChild(i),n.dataset.value=e.toString(),n.addEventListener("click",()=>{x(e,n)}),a.appendChild(n)})}function x(t,e){if(r.isLocked||!c)return;if(t===c.answer){r.isLocked=!0,r.score+=10,f(),h("–í–µ—Ä–Ω–æ! üéâ","feedback--success"),E(),a.querySelectorAll(".jellyfish").forEach(s=>{s.disabled=!0}),e.classList.remove("jellyfish--wrong"),e.classList.add("jellyfish--correct");const o=()=>{e.removeEventListener("animationend",o),y()};e.addEventListener("animationend",o)}else r.score=Math.max(0,r.score-2),f(),h("–ù–µ —Å–æ–≤—Å–µ–º, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë ü™º","feedback--error"),e.classList.remove("jellyfish--wrong"),e.offsetWidth,e.classList.add("jellyfish--wrong")}function M(){m();const t=window.setInterval(()=>{r.timeLeft-=1,m(),r.timeLeft<=0&&(E(),N())},1e3);r.timerId=t}function E(){r.timerId!==null&&(window.clearInterval(r.timerId),r.timerId=null)}function N(){if(r.isLocked)return;r.isLocked=!0,h("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∫–∞ ‚è∞","feedback--error"),a.querySelectorAll(".jellyfish").forEach(e=>{e.disabled=!0}),window.setTimeout(()=>{y()},1e3)}function f(){L.textContent=r.score.toString(),b.textContent=r.round.toString()}function m(){w.textContent=r.timeLeft.toString()}function S(){l.textContent="",l.className="feedback"}function h(t,e){l.textContent=t,l.className=`feedback ${e}`}
